{"id":"cSfn","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../tileurlfunction.js","loc":{"line":17,"column":75},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/tileurlfunction.js"},{"name":"../array.js","loc":{"line":18,"column":42},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/array.js"},{"name":"../extent.js","loc":{"line":19,"column":31},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"../obj.js","loc":{"line":20,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/obj.js"},{"name":"../proj.js","loc":{"line":21,"column":66},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/proj.js"},{"name":"./TileImage.js","loc":{"line":22,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/TileImage.js"},{"name":"./WMTSRequestEncoding.js","loc":{"line":23,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTSRequestEncoding.js"},{"name":"../tilegrid/WMTS.js","loc":{"line":24,"column":48},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/tilegrid/WMTS.js"},{"name":"../uri.js","loc":{"line":25,"column":29},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/WMTS.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/uri.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.optionsFromCapabilities=p,exports.default=void 0;var e=require(\"../tileurlfunction.js\"),t=require(\"../array.js\"),i=require(\"../extent.js\"),r=require(\"../obj.js\"),n=require(\"../proj.js\"),o=l(require(\"./TileImage.js\")),s=l(require(\"./WMTSRequestEncoding.js\")),a=require(\"../tilegrid/WMTS.js\"),u=require(\"../uri.js\");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=function(t){function i(i){var r=this,n=void 0!==i.requestEncoding?i.requestEncoding:s.default.KVP,o=i.tileGrid,a=i.urls;return void 0===a&&void 0!==i.url&&(a=(0,e.expandUrl)(i.url)),(r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:o,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:e.nullTileUrlFunction,urls:a,wrapX:void 0!==i.wrapX&&i.wrapX,transition:i.transition})||this).version_=void 0!==i.version?i.version:\"1.0.0\",r.format_=void 0!==i.format?i.format:\"image/jpeg\",r.dimensions_=void 0!==i.dimensions?i.dimensions:{},r.layer_=i.layer,r.matrixSet_=i.matrixSet,r.style_=i.style,r.requestEncoding_=n,r.setKey(r.getKeyForDimensions_()),a&&a.length>0&&(r.tileUrlFunction=(0,e.createFromTileUrlFunctions)(a.map(g.bind(r)))),r}return c(i,t),i.prototype.setUrls=function(t){this.urls=t;var i=t.join(\"\\n\");this.setTileUrlFunction((0,e.createFromTileUrlFunctions)(t.map(g.bind(this))),i)},i.prototype.getDimensions=function(){return this.dimensions_},i.prototype.getFormat=function(){return this.format_},i.prototype.getLayer=function(){return this.layer_},i.prototype.getMatrixSet=function(){return this.matrixSet_},i.prototype.getRequestEncoding=function(){return this.requestEncoding_},i.prototype.getStyle=function(){return this.style_},i.prototype.getVersion=function(){return this.version_},i.prototype.getKeyForDimensions_=function(){var e=0,t=[];for(var i in this.dimensions_)t[e++]=i+\"-\"+this.dimensions_[i];return t.join(\"/\")},i.prototype.updateDimensions=function(e){(0,r.assign)(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},i}(o.default),d=f;function p(e,r){var o=e.Contents.Layer,u=(0,t.find)(o,function(e,t,i){return e.Identifier==r.layer});if(null===u)return null;var l,c=e.Contents.TileMatrixSet;(l=u.TileMatrixSetLink.length>1?\"projection\"in r?(0,t.findIndex)(u.TileMatrixSetLink,function(e,i,o){var s=(0,t.find)(c,function(t){return t.Identifier==e.TileMatrixSet}).SupportedCRS,a=(0,n.get)(s.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/,\"$1:$3\"))||(0,n.get)(s),u=(0,n.get)(r.projection);return a&&u?(0,n.equivalent)(a,u):s==r.projection}):(0,t.findIndex)(u.TileMatrixSetLink,function(e,t,i){return e.TileMatrixSet==r.matrixSet}):0)<0&&(l=0);var f=u.TileMatrixSetLink[l].TileMatrixSet,d=u.TileMatrixSetLink[l].TileMatrixSetLimits,p=u.Format[0];\"format\"in r&&(p=r.format),(l=(0,t.findIndex)(u.Style,function(e,t,i){return\"style\"in r?e.Title==r.style:e.isDefault}))<0&&(l=0);var g=u.Style[l].Identifier,m={};\"Dimension\"in u&&u.Dimension.forEach(function(e,t,i){var r=e.Identifier,n=e.Default;void 0===n&&(n=e.Value[0]),m[r]=n});var v,h=e.Contents.TileMatrixSet,y=(0,t.find)(h,function(e,t,i){return e.Identifier==f}),_=y.SupportedCRS;if(_&&(v=(0,n.get)(_.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/,\"$1:$3\"))||(0,n.get)(_)),\"projection\"in r){var x=(0,n.get)(r.projection);x&&(v&&!(0,n.equivalent)(x,v)||(v=x))}var S,T,j=u.WGS84BoundingBox;if(void 0!==j){var M=(0,n.get)(\"EPSG:4326\").getExtent();T=j[0]==M[0]&&j[2]==M[2],S=(0,n.transformExtent)(j,\"EPSG:4326\",v);var q=v.getExtent();q&&((0,i.containsExtent)(q,S)||(S=void 0))}var E=(0,a.createFromCapabilitiesMatrixSet)(y,S,d),F=[],P=r.requestEncoding;if(P=void 0!==P?P:\"\",\"OperationsMetadata\"in e&&\"GetTile\"in e.OperationsMetadata)for(var w=e.OperationsMetadata.GetTile.DCP.HTTP.Get,C=0,L=w.length;C<L;++C)if(w[C].Constraint){var G=(0,t.find)(w[C].Constraint,function(e){return\"GetEncoding\"==e.name}).AllowedValues.Value;if(\"\"===P&&(P=G[0]),P!==s.default.KVP)break;(0,t.includes)(G,s.default.KVP)&&F.push(w[C].href)}else w[C].href&&(P=s.default.KVP,F.push(w[C].href));return 0===F.length&&(P=s.default.REST,u.ResourceURL.forEach(function(e){\"tile\"===e.resourceType&&(p=e.format,F.push(e.template))})),{urls:F,layer:r.layer,matrixSet:f,format:p,projection:v,requestEncoding:P,tileGrid:E,style:g,dimensions:m,wrapX:T,crossOrigin:r.crossOrigin}}function g(e){var t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==s.default.KVP&&(0,r.assign)(i,{Service:\"WMTS\",Request:\"GetTile\",Version:this.version_,Format:this.format_}),e=t==s.default.KVP?(0,u.appendParams)(e,i):e.replace(/\\{(\\w+?)\\}/g,function(e,t){return t.toLowerCase()in i?i[t.toLowerCase()]:e});var n=this.tileGrid,o=this.dimensions_;return function(i,a,l){if(i){var c={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};(0,r.assign)(c,o);var f=e;return f=t==s.default.KVP?(0,u.appendParams)(f,c):f.replace(/\\{(\\w+?)\\}/g,function(e,t){return c[t]})}}}exports.default=d;"},"sourceMaps":null,"error":null,"hash":"e61bd686f67f03782c943441a311adb1","cacheData":{"env":{}}}