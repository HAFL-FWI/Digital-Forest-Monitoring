{"id":"rGfC","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../dom.js","loc":{"line":17,"column":38},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/IconImage.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/dom.js"},{"name":"../events/Target.js","loc":{"line":18,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/IconImage.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/Target.js"},{"name":"../events/EventType.js","loc":{"line":19,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/IconImage.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/EventType.js"},{"name":"../ImageState.js","loc":{"line":20,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/IconImage.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/ImageState.js"},{"name":"./IconImageCache.js","loc":{"line":21,"column":41},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/IconImage.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/IconImageCache.js"},{"name":"../Image.js","loc":{"line":22,"column":28},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/IconImage.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Image.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.get=_,exports.default=void 0;var t=require(\"../dom.js\"),e=r(require(\"../events/Target.js\")),i=r(require(\"../events/EventType.js\")),a=r(require(\"../ImageState.js\")),n=require(\"./IconImageCache.js\"),s=require(\"../Image.js\");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),h=function(e){function n(t,i,a,n,s,r){var o=e.call(this)||this;return o.hitDetectionImage_=null,o.image_=t||new Image,null!==n&&(o.image_.crossOrigin=n),o.canvas_=r?document.createElement(\"canvas\"):null,o.color_=r,o.unlisten_=null,o.imageState_=s,o.size_=a,o.src_=i,o.tainted_,o}return o(n,e),n.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===a.default.LOADED){this.tainted_=!1;var e=(0,t.createCanvasContext2D)(1,1);try{e.drawImage(this.image_,0,0),e.getImageData(0,0,1,1)}catch(i){this.tainted_=!0}}return!0===this.tainted_},n.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(i.default.CHANGE)},n.prototype.handleImageError_=function(){this.imageState_=a.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.handleImageLoad_=function(){this.imageState_=a.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},n.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},n.prototype.getImageState=function(){return this.imageState_},n.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_)if(this.isTainted_()){var i=this.size_[0],a=this.size_[1],n=(0,t.createCanvasContext2D)(i,a);n.fillRect(0,0,i,a),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},n.prototype.getSize=function(){return this.size_},n.prototype.getSrc=function(){return this.src_},n.prototype.load=function(){if(this.imageState_==a.default.IDLE){this.imageState_=a.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,s.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},n.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext(\"2d\");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,a=this.color_[0]/255,n=this.color_[1]/255,s=this.color_[2]/255,r=0,o=i.length;r<o;r+=4)i[r]*=a,i[r+1]*=n,i[r+2]*=s;t.putImageData(e,0,0)}},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(e.default);function _(t,e,i,a,s,r){var o=n.shared.get(e,a,r);return o||(o=new h(t,e,i,a,s,r),n.shared.set(e,a,r,o)),o}var c=h;exports.default=c;"},"sourceMaps":null,"error":null,"hash":"9b1ebc275774739659f69b982787c66d","cacheData":{"env":{}}}