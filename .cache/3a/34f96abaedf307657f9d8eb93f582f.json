{"id":"fyRJ","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../Feature.js","loc":{"line":17,"column":20},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Feature.js"},{"name":"../MapBrowserEventType.js","loc":{"line":18,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/MapBrowserEventType.js"},{"name":"../coordinate.js","loc":{"line":19,"column":137},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/coordinate.js"},{"name":"../events/Event.js","loc":{"line":20,"column":18},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/Event.js"},{"name":"../extent.js","loc":{"line":21,"column":40},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"../geom/GeometryType.js","loc":{"line":22,"column":25},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/GeometryType.js"},{"name":"../geom/Point.js","loc":{"line":23,"column":18},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/Point.js"},{"name":"../geom/Polygon.js","loc":{"line":24,"column":48},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/Polygon.js"},{"name":"./Pointer.js","loc":{"line":25,"column":31},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Pointer.js"},{"name":"../layer/Vector.js","loc":{"line":26,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/layer/Vector.js"},{"name":"../source/Vector.js","loc":{"line":27,"column":25},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js"},{"name":"../style/Style.js","loc":{"line":28,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/Style.js"},{"name":"../proj.js","loc":{"line":29,"column":29},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Extent.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/proj.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=x(require(\"../Feature.js\")),t=x(require(\"../MapBrowserEventType.js\")),n=require(\"../coordinate.js\"),r=x(require(\"../events/Event.js\")),o=require(\"../extent.js\"),i=x(require(\"../geom/GeometryType.js\")),a=x(require(\"../geom/Point.js\")),u=require(\"../geom/Polygon.js\"),l=x(require(\"./Pointer.js\")),s=x(require(\"../layer/Vector.js\")),p=x(require(\"../source/Vector.js\")),c=require(\"../style/Style.js\"),d=require(\"../proj.js\");function x(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f={EXTENTCHANGED:\"extentchanged\"},_=function(e){function t(t){var n=e.call(this,f.EXTENTCHANGED)||this;return n.extent=t,n}return h(t,e),t}(r.default),v=function(r){function i(e){var t=this,n=e||{};return(t=r.call(this,n)||this).extent_=null,t.pointerHandler_=null,t.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,t.snappedToVertex_=!1,t.extentFeature_=null,t.vertexFeature_=null,e||(e={}),t.extentOverlay_=new s.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:y(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.vertexOverlay_=new s.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:g(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&t.setExtent(e.extent),t}return h(i,r),i.prototype.snapToVertex_=function(e,t){var r=t.getCoordinateFromPixelInternal(e),o=this.getExtentInternal();if(o){var i=O(o);i.sort(function(e,t){return(0,n.squaredDistanceToSegment)(r,e)-(0,n.squaredDistanceToSegment)(r,t)});var a=i[0],u=(0,n.closestOnSegment)(r,a),l=t.getPixelFromCoordinateInternal(u);if((0,n.distance)(e,l)<=this.pixelTolerance_){var s=t.getPixelFromCoordinateInternal(a[0]),p=t.getPixelFromCoordinateInternal(a[1]),c=(0,n.squaredDistance)(l,s),d=(0,n.squaredDistance)(l,p),x=Math.sqrt(Math.min(c,d));return this.snappedToVertex_=x<=this.pixelTolerance_,this.snappedToVertex_&&(u=c>d?a[1]:a[0]),u}}return null},i.prototype.handlePointerMove_=function(e){var t=e.pixel,n=e.map,r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(r)},i.prototype.createOrUpdateExtentFeature_=function(t){var n=this.extentFeature_;return n?t?n.setGeometry((0,u.fromExtent)(t)):n.setGeometry(void 0):(n=t?new e.default((0,u.fromExtent)(t)):new e.default({}),this.extentFeature_=n,this.extentOverlay_.getSource().addFeature(n)),n},i.prototype.createOrUpdatePointerFeature_=function(t){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(t):(n=new e.default(new a.default(t)),this.vertexFeature_=n,this.vertexOverlay_.getSource().addFeature(n));return n},i.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=t.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),r.prototype.handleEvent.call(this,e),!1)},i.prototype.handleDownEvent=function(e){var t=e.pixel,n=e.map,r=this.getExtentInternal(),o=this.snapToVertex_(t,n),i=function(e){var t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(o&&r){var a=o[0]==r[0]||o[0]==r[2]?o[0]:null,u=o[1]==r[1]||o[1]==r[3]?o[1]:null;null!==a&&null!==u?this.pointerHandler_=E(i(o)):null!==a?this.pointerHandler_=m(i([a,r[1]]),i([a,r[3]])):null!==u&&(this.pointerHandler_=m(i([r[0],u]),i([r[2],u])))}else o=n.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=E(o);return!0},i.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0},i.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==(0,o.getArea)(t)||this.setExtent(null),!1},i.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),r.prototype.setMap.call(this,e)},i.prototype.getExtent=function(){return(0,d.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())},i.prototype.getExtentInternal=function(){return this.extent_},i.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new _(this.extent_))},i}(l.default);function y(){var e=(0,c.createEditingStyle)();return function(t,n){return e[i.default.POLYGON]}}function g(){var e=(0,c.createEditingStyle)();return function(t,n){return e[i.default.POINT]}}function E(e){return function(t){return(0,o.boundingExtent)([e,t])}}function m(e,t){return e[0]==t[0]?function(n){return(0,o.boundingExtent)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return(0,o.boundingExtent)([e,[t[0],n[1]]])}:null}function O(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}var P=v;exports.default=P;"},"sourceMaps":null,"error":null,"hash":"5607fb59cddb63da92ad9b0c1bb1b234","cacheData":{"env":{}}}