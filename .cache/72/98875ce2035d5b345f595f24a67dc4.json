{"id":"kT0d","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"ol","loc":{"line":1,"column":26},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/index.js"},{"name":"ol/control","loc":{"line":2,"column":44},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/control.js"},{"name":"@material/switch","loc":{"line":3,"column":26},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/@material/switch/index.js"},{"name":"@material/slider","loc":{"line":4,"column":26},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/@material/slider/index.js"},{"name":"@material/list","loc":{"line":5,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/@material/list/index.js"},{"name":"ol/ol.css","loc":{"line":6,"column":7},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/ol.css"},{"name":"./basemap_util","loc":{"line":7,"column":59},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/src/utils/basemap_util.js"},{"name":"./main_util","loc":{"line":8,"column":56},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/src/utils/main_util.js"},{"name":"./init","loc":{"line":9,"column":26},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/src/utils/init.js"},{"name":"./BasemapControl","loc":{"line":10,"column":27},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/src/utils/BasemapControl.js"},{"name":"./VHMControl","loc":{"line":11,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/src/utils/VHMControl.js"},{"name":"./VeraenderungControl","loc":{"line":12,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/viewer_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/src/utils/VeraenderungControl.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"ol\"),t=require(\"ol/control\"),r=require(\"@material/switch\"),n=require(\"@material/slider\"),o=require(\"@material/list\");require(\"ol/ol.css\");var a=require(\"./basemap_util\"),l=require(\"./main_util\"),s=require(\"./init\"),i=m(require(\"./BasemapControl\")),c=m(require(\"./VHMControl\")),d=m(require(\"./VeraenderungControl\"));function m(e){return e&&e.__esModule?e:{default:e}}var u={model:{content:document.getElementsByClassName(\"content\")[0],searchResultsList:document.querySelector(\".mdc-list\")},controller:{init:function(e){var t=e.title;u.controller.removeContent(),u.controller.createContainer(),u.controller.showViewer(t);[].map.call(document.querySelectorAll(\".mdc-switch\"),function(e){return new r.MDCSwitch(e)}),[].map.call(document.querySelectorAll(\".mdc-slider\"),function(e){return new n.MDCSlider(e)});u.model.searchList=new o.MDCList(document.querySelector(\".mdc-list\")),u.model.searchList.singleSelection=!0,u.model.searchList.listen(\"focusin\",function(e){s.textField.value=e.target.innerText}),u.model.searchList.listen(\"MDCList:action\",function(){u.controller.showSearchGeometry(),u.controller.closeSearchResults(l.searchResults)})},showSearchGeometry:function(){var e=u.model.searchList.selectedIndex,t=u.model.searchList.listElements[e];(0,l.displayGeojson)({geojson:JSON.parse(t.dataset.geojson),map:u.model.map})},removeContent:function(){u.model.content.innerHTML=\"\"},createContainer:function(){u.model.viewerContainer=u.view.getViewerContainer(),u.model.content.appendChild(u.model.viewerContainer)},showViewer:function(r){u.model.map=new e.Map({view:new e.View({center:[829300,5933555],zoom:13,minZoom:9,maxZoom:21}),layers:[a.orthoBasemap,a.swBasemap,a.vegetationBasemap],target:\"map\",controls:(0,t.defaults)({attributionOptions:{collapsible:!1}})});var n=new i.default(u.model.map),o=new c.default(u.model.map),l=new d.default({map:u.model.map,title:r});u.model.map.addControl(n.createBasemapControl()),u.model.map.addControl(o.createVHMControl()),u.model.map.addControl(l.createVeraenderungControl()),u.model.map.addEventListener(\"click\",function(e){return console.log(e)})},closeSearchResults:function(e){return!!e&&(e.style.transform=\"scale(1,0)\",e.style.zIndex=-1,e)},performSearch:(0,l.debounce)(function(e){u.controller.closeSearchResults(l.searchResults);var t=e.target.value;if(u.model.searchResultsList.innerHTML=\"\",t.length>1){l.searchResults.style.zIndex=5,l.searchResults.style.transform=\"scale(1)\";var r=\"https://api3.geo.admin.ch/rest/services/api/SearchServer?searchText=\".concat(e.target.value,\"&type=locations&limit=50&sr=3857&geometryFormat=geojson\"),n=new XMLHttpRequest;n.open(\"GET\",r,!0),n.onload=function(){n.status>=500?u.model.searchResultsList.innerHTML='<div style=\"padding:12px\">Sorry, es konnten keine Resultate gefunden werden....</div>':(JSON.parse(n.responseText).features.forEach(function(e,t){var r=document.createElement(\"li\");r.setAttribute(\"data-geojson\",JSON.stringify(e));var n=document.createElement(\"span\");r.classList.add(\"mdc-list-item\"),n.classList.add(\"mdc-list-item__text\"),0===t&&(r.tabIndex=t),n.innerHTML=\"\".concat(e.properties.label),r.appendChild(n),u.model.searchResultsList.appendChild(r)}),u.model.searchList.layout())},n.onerror=function(){u.model.searchResultsList.innerHTML='<div style=\"padding:12px\">Es gab einen Fehler bei der Suchanfrage....</div>'},n.send()}},250)},view:{getViewerContainer:function(){var e=document.createElement(\"div\");return e.id=\"map\",e}}},p=u;exports.default=p;"},"sourceMaps":null,"error":null,"hash":"08c4844971b72646d4518ed3a73eafd7","cacheData":{"env":{}}}