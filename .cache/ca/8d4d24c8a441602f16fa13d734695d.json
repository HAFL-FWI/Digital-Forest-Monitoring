{"id":"ABAf","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../Image.js","loc":{"line":17,"column":25},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/ImageArcGISRest.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Image.js"},{"name":"../asserts.js","loc":{"line":18,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/ImageArcGISRest.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/asserts.js"},{"name":"../events/EventType.js","loc":{"line":19,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/ImageArcGISRest.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/EventType.js"},{"name":"../extent.js","loc":{"line":20,"column":52},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/ImageArcGISRest.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"../obj.js","loc":{"line":21,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/ImageArcGISRest.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/obj.js"},{"name":"./Image.js","loc":{"line":22,"column":54},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/ImageArcGISRest.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Image.js"},{"name":"../uri.js","loc":{"line":23,"column":29},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/ImageArcGISRest.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/uri.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=p(require(\"../Image.js\")),e=require(\"../asserts.js\"),i=p(require(\"../events/EventType.js\")),r=require(\"../extent.js\"),n=require(\"../obj.js\"),o=u(require(\"./Image.js\")),a=require(\"../uri.js\");function s(){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t){if(t&&t.__esModule)return t;var e=s();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=r?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}}return i.default=t,e&&e.set(t,i),i}function p(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),g=function(s){function u(t){var e=this,i=t||{};return(e=s.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions})||this).crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,e.hidpi_=void 0===i.hidpi||i.hidpi,e.url_=i.url,e.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:o.defaultImageLoadFunction,e.params_=i.params||{},e.image_=null,e.imageSize_=[0,0],e.renderedRevision_=0,e.ratio_=void 0!==i.ratio?i.ratio:1.5,e}return c(u,s),u.prototype.getParams=function(){return this.params_},u.prototype.getImageInternal=function(e,o,a,s){if(void 0===this.url_)return null;o=this.findNearestResolution(o),a=this.hidpi_?a:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==o&&u.getPixelRatio()==a&&(0,r.containsExtent)(u.getExtent(),e))return u;var p={F:\"image\",FORMAT:\"PNG32\",TRANSPARENT:!0};(0,n.assign)(p,this.params_);var c=((e=e.slice())[0]+e[2])/2,g=(e[1]+e[3])/2;if(1!=this.ratio_){var h=this.ratio_*(0,r.getWidth)(e)/2,l=this.ratio_*(0,r.getHeight)(e)/2;e[0]=c-h,e[1]=g-l,e[2]=c+h,e[3]=g+l}var d=o/a,_=Math.ceil((0,r.getWidth)(e)/d),f=Math.ceil((0,r.getHeight)(e)/d);e[0]=c-d*_/2,e[2]=c+d*_/2,e[1]=g-d*f/2,e[3]=g+d*f/2,this.imageSize_[0]=_,this.imageSize_[1]=f;var v=this.getRequestUrl_(e,this.imageSize_,a,s,p);return this.image_=new t.default(e,o,a,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(i.default.CHANGE,this.handleImageChange.bind(this)),this.image_},u.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},u.prototype.getRequestUrl_=function(t,i,r,n,o){var s=n.getCode().split(\":\").pop();o.SIZE=i[0]+\",\"+i[1],o.BBOX=t.join(\",\"),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(90*r);var u=this.url_,p=u.replace(/MapServer\\/?$/,\"MapServer/export\").replace(/ImageServer\\/?$/,\"ImageServer/exportImage\");return p==u&&(0,e.assert)(!1,50),(0,a.appendParams)(p,o)},u.prototype.getUrl=function(){return this.url_},u.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},u.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},u.prototype.updateParams=function(t){(0,n.assign)(this.params_,t),this.image_=null,this.changed()},u}(o.default),h=g;exports.default=h;"},"sourceMaps":null,"error":null,"hash":"ebd9e96d277f234e54884b5dc74c696f","cacheData":{"env":{}}}