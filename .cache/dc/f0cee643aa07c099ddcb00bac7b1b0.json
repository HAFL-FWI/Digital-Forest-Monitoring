{"id":"iZLT","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../../array.js","loc":{"line":17,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/array.js"},{"name":"../../extent.js","loc":{"line":18,"column":85},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"../../geom/flat/length.js","loc":{"line":19,"column":33},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/flat/length.js"},{"name":"../../geom/flat/textpath.js","loc":{"line":20,"column":31},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/flat/textpath.js"},{"name":"../../geom/flat/transform.js","loc":{"line":21,"column":28},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/flat/transform.js"},{"name":"../canvas.js","loc":{"line":27,"column":109},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas.js"},{"name":"./Instruction.js","loc":{"line":23,"column":30},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Instruction.js"},{"name":"./TextBuilder.js","loc":{"line":24,"column":27},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/TextBuilder.js"},{"name":"../../transform.js","loc":{"line":25,"column":135},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/transform.js"},{"name":"../../dom.js","loc":{"line":26,"column":38},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/dom.js"},{"name":"../../Disposable.js","loc":{"line":28,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Disposable.js"},{"name":"rbush","loc":{"line":29,"column":18},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas/Executor.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/rbush/rbush.min.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=require(\"../../array.js\"),e=require(\"../../extent.js\"),i=require(\"../../geom/flat/length.js\"),a=require(\"../../geom/flat/textpath.js\"),r=require(\"../../geom/flat/transform.js\"),l=require(\"../canvas.js\"),n=c(require(\"./Instruction.js\")),s=require(\"./TextBuilder.js\"),o=require(\"../../transform.js\"),h=require(\"../../dom.js\"),u=c(require(\"../../Disposable.js\")),d=c(require(\"rbush\"));function c(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),p=(0,e.createEmpty)(),v=(0,o.create)(),_=[],g=[],x=[],m=[],y=function(u){function c(t,e,i,a){var r=u.call(this)||this;return r.overlaps=i,r.pixelRatio=e,r.resolution=t,r.alignFill_,r.declutterItems=[],r.instructions=a.instructions,r.coordinates=a.coordinates,r.coordinateCache_={},r.renderedTransform_=(0,o.create)(),r.hitDetectionInstructions=a.hitDetectionInstructions,r.pixelCoordinates_=null,r.viewRotation_=0,r.fillStates=a.fillStates||{},r.strokeStates=a.strokeStates||{},r.textStates=a.textStates||{},r.widths_={},r}return f(c,u),c.prototype.disposeInternal=function(){l.labelCache.release(this),u.prototype.disposeInternal.call(this)},c.prototype.getTextImage=function(t,e,i,a){var r,n=a+e+t+i+this.pixelRatio;if(!l.labelCache.containsKey(n)){var o=a?this.strokeStates[a]:null,u=i?this.fillStates[i]:null,d=this.textStates[e],c=this.pixelRatio,f=d.scale*c,p=s.TEXT_ALIGN[d.textAlign||l.defaultTextAlign],v=a&&o.lineWidth?o.lineWidth:0,_=t.split(\"\\n\"),g=_.length,x=[],m=(0,l.measureTextWidths)(d.font,_,x),y=(0,l.measureTextHeight)(d.font),T=y*g,S=m+v,I=(0,h.createCanvasContext2D)(Math.ceil((S+2)*f),Math.ceil((T+v)*f));r=I.canvas,l.labelCache.set(n,r),1!=f&&I.scale(f,f),I.font=d.font,a&&(I.strokeStyle=o.strokeStyle,I.lineWidth=v,I.lineCap=o.lineCap,I.lineJoin=o.lineJoin,I.miterLimit=o.miterLimit,I.setLineDash&&o.lineDash.length&&(I.setLineDash(o.lineDash),I.lineDashOffset=o.lineDashOffset)),i&&(I.fillStyle=u.fillStyle),I.textBaseline=\"middle\",I.textAlign=\"center\";var k=.5-p,b=p*S+k*v,w=void 0;if(a)for(w=0;w<g;++w)I.strokeText(_[w],b+k*x[w],.5*(v+y)+w*y);if(i)for(w=0;w<g;++w)I.fillText(_[w],b+k*x[w],.5*(v+y)+w*y)}return l.labelCache.get(n,this)},c.prototype.replayTextBackground_=function(t,e,i,a,r,l,n){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,r),t.lineTo.apply(t,e),l&&(this.alignFill_=l[2],this.fill_(t)),n&&(this.setStrokeStyle_(t,n),t.stroke())},c.prototype.replayImage_=function(t,i,a,r,n,s,h,u,d,c,f,y,T,S,I,k,b,w){var E=b||w;i-=n*=T,a-=s*=T;var C=I+c>r.width?r.width-c:I,A=u+f>r.height?r.height-f:u,R=k[3]+C*T+k[1],L=k[0]+A*T+k[2],M=i-k[3],O=a-k[0];(E||0!==y)&&(_[0]=M,m[0]=M,_[1]=O,g[1]=O,g[0]=M+R,x[0]=g[0],x[1]=O+L,m[1]=x[1]);var D=null;if(0!==y){var P=i+n,j=a+s;D=(0,o.compose)(v,P,j,1,1,y,-P,-j),(0,o.apply)(v,_),(0,o.apply)(v,g),(0,o.apply)(v,x),(0,o.apply)(v,m),(0,e.createOrUpdate)(Math.min(_[0],g[0],x[0],m[0]),Math.min(_[1],g[1],x[1],m[1]),Math.max(_[0],g[0],x[0],m[0]),Math.max(_[1],g[1],x[1],m[1]),p)}else(0,e.createOrUpdate)(M,O,M+R,O+L,p);var q=t.canvas,W=w?w[2]*T/2:0,N=p[0]-W<=q.width&&p[2]+W>=0&&p[1]-W<=q.height&&p[3]+W>=0;if(S&&(i=Math.round(i),a=Math.round(a)),h){if(!N&&1==h[4])return;(0,e.extend)(h,p);var G=N?[t,D?D.slice(0):null,d,r,c,f,C,A,i,a,T]:null;G&&(E&&G.push(b,w,_,g,x,m),h.push(G))}else N&&(E&&this.replayTextBackground_(t,_,g,x,m,b,w),(0,l.drawImage)(t,D,d,r,c,f,C,A,i,a,T))},c.prototype.fill_=function(t){if(this.alignFill_){var e=(0,o.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},c.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},c.prototype.renderDeclutter=function(t,i,a,r){if(t&&t.length>5){var n=t[4];if(1==n||n==t.length-5){var s={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};if(r||(r=new d.default(9)),!r.collides(s)){r.insert(s);for(var o=5,h=t.length;o<h;++o){var u=t[o],c=u[0],f=c.globalAlpha;f!==a&&(c.globalAlpha=a),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),l.drawImage.apply(void 0,u),f!==a&&(c.globalAlpha=f)}}t.length=5,(0,e.createOrUpdateEmpty)(t)}}return r},c.prototype.drawTextImageWithPointPlacement_=function(t,e,i,a){var r=this.textStates[e],n=this.getTextImage(t,e,a,i),o=this.strokeStates[i],h=this.pixelRatio,u=s.TEXT_ALIGN[r.textAlign||l.defaultTextAlign],d=s.TEXT_ALIGN[r.textBaseline||l.defaultTextBaseline],c=o&&o.lineWidth?o.lineWidth:0;return{label:n,anchorX:u*(n.width/h-2*r.scale)+2*(.5-u)*c,anchorY:d*n.height/h+2*(.5-d)*c}},c.prototype.execute_=function(h,u,d,c,f,p){var v;this.declutterItems.length=0,this.pixelCoordinates_&&(0,t.equals)(u,this.renderedTransform_)?v=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),v=(0,r.transform2D)(this.coordinates,0,this.coordinates.length,2,u,this.pixelCoordinates_),(0,o.setFromArray)(this.renderedTransform_,u));for(var _,g,x,m,y,T,S,I,k,b,w,E,C,A,R,L,M,O=0,D=d.length,P=0,j=0,q=0,W=null,N=null,G=this.coordinateCache_,B=this.viewRotation_,F=Math.round(1e12*Math.atan2(-u[1],u[0]))/1e12,X={context:h,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},Y=this.instructions!=d||this.overlaps?0:200;O<D;){var H=d[O];switch(H[0]){case n.default.BEGIN_GEOMETRY:(R=H[1]).getGeometry()?void 0===p||(0,e.intersects)(p,H[3])?++O:O=H[2]+1:O=H[2];break;case n.default.BEGIN_PATH:j>Y&&(this.fill_(h),j=0),q>Y&&(h.stroke(),q=0),j||q||(h.beginPath(),m=NaN,y=NaN),++O;break;case n.default.CIRCLE:var U=v[P=H[1]],J=v[P+1],K=v[P+2]-U,V=v[P+3]-J,z=Math.sqrt(K*K+V*V);h.moveTo(U+z,J),h.arc(U,J,z,0,2*Math.PI,!0),++O;break;case n.default.CLOSE_PATH:h.closePath(),++O;break;case n.default.CUSTOM:P=H[1],_=H[2];var Q=H[3],Z=H[4],$=6==H.length?H[5]:void 0;X.geometry=Q,X.feature=R,O in G||(G[O]=[]);var tt=G[O];$?$(v,P,_,2,tt):(tt[0]=v[P],tt[1]=v[P+1],tt.length=2),Z(tt,X),++O;break;case n.default.DRAW_IMAGE:P=H[1],_=H[2],b=H[3],g=H[4],x=H[5],k=f?null:H[6];var et=H[7],it=H[8],at=H[9],rt=H[10],lt=H[11],nt=H[12],st=H[13],ot=H[14];if(!b&&H.length>=19){w=H[18],E=H[19],C=H[20],A=H[21];var ht=this.drawTextImageWithPointPlacement_(w,E,C,A);b=ht.label,H[3]=b;var ut=H[22];g=(ht.anchorX-ut)*this.pixelRatio,H[4]=g;var dt=H[23];x=(ht.anchorY-dt)*this.pixelRatio,H[5]=x,et=b.height,H[7]=et,ot=b.width,H[14]=ot}var ct=void 0;H.length>24&&(ct=H[24]);var ft=void 0,pt=void 0,vt=void 0;H.length>16?(ft=H[15],pt=H[16],vt=H[17]):(ft=l.defaultPadding,pt=!1,vt=!1),lt&&F?nt+=B:lt||F||(nt-=B);for(var _t=0,gt=0;P<_;P+=2)if(!(ct&&ct[_t++]<ot/this.pixelRatio)){if(k){var xt=Math.floor(gt);k.length<xt+1&&((I=(0,e.createEmpty)()).push(k[0][4]),k.push(I)),I=k[xt]}this.replayImage_(h,v[P],v[P+1],b,g,x,I,et,it,at,rt,nt,st,c,ot,ft,pt?W:null,vt?N:null),I&&(gt===Math.floor(gt)&&this.declutterItems.push(this,I,R),gt+=1/I[4])}++O;break;case n.default.DRAW_CHARS:var mt=H[1],yt=H[2],Tt=H[3];I=f?null:H[4];var St=H[5];A=H[6];var It=H[7],kt=H[8],bt=H[9];C=H[10];var wt=H[11];w=H[12],E=H[13];var Et=H[14],Ct=this.textStates[E],At=Ct.font,Rt=Ct.scale*kt,Lt=void 0;At in this.widths_?Lt=this.widths_[At]:(Lt={},this.widths_[At]=Lt);var Mt=(0,i.lineStringLength)(v,mt,yt,2),Ot=Rt*(0,l.measureAndCacheTextWidth)(At,w,Lt);if(St||Ot<=Mt){var Dt=this.textStates[E].textAlign,Pt=(Mt-Ot)*s.TEXT_ALIGN[Dt],jt=(0,a.drawTextOnPath)(v,mt,yt,2,w,Pt,It,Rt,l.measureAndCacheTextWidth,At,Lt);if(jt){var qt=void 0,Wt=void 0,Nt=void 0,Gt=void 0,Bt=void 0;if(C)for(qt=0,Wt=jt.length;qt<Wt;++qt)Nt=(Bt=jt[qt])[4],Gt=this.getTextImage(Nt,E,\"\",C),g=Bt[2]+wt,x=Tt*Gt.height+2*(.5-Tt)*wt-bt,this.replayImage_(h,Bt[0],Bt[1],Gt,g,x,I,Gt.height,1,0,0,Bt[3],Et,!1,Gt.width,l.defaultPadding,null,null);if(A)for(qt=0,Wt=jt.length;qt<Wt;++qt)Nt=(Bt=jt[qt])[4],Gt=this.getTextImage(Nt,E,A,\"\"),g=Bt[2],x=Tt*Gt.height-bt,this.replayImage_(h,Bt[0],Bt[1],Gt,g,x,I,Gt.height,1,0,0,Bt[3],Et,!1,Gt.width,l.defaultPadding,null,null)}}this.declutterItems.push(this,I,R),++O;break;case n.default.END_GEOMETRY:if(void 0!==f){var Ft=f(R=H[1]);if(Ft)return Ft}++O;break;case n.default.FILL:Y?j++:this.fill_(h),++O;break;case n.default.MOVE_TO_LINE_TO:for(P=H[1],_=H[2],L=v[P],S=(M=v[P+1])+.5|0,(T=L+.5|0)===m&&S===y||(h.moveTo(L,M),m=T,y=S),P+=2;P<_;P+=2)T=(L=v[P])+.5|0,S=(M=v[P+1])+.5|0,P!=_-2&&T===m&&S===y||(h.lineTo(L,M),m=T,y=S);++O;break;case n.default.SET_FILL_STYLE:W=H,this.alignFill_=H[2],j&&(this.fill_(h),j=0,q&&(h.stroke(),q=0)),h.fillStyle=H[1],++O;break;case n.default.SET_STROKE_STYLE:N=H,q&&(h.stroke(),q=0),this.setStrokeStyle_(h,H),++O;break;case n.default.STROKE:Y?q++:h.stroke(),++O;break;default:++O}}j&&this.fill_(h),q&&h.stroke()},c.prototype.execute=function(t,e,i,a){this.viewRotation_=i,this.execute_(t,e,this.instructions,a,void 0,void 0)},c.prototype.executeHitDetection=function(t,e,i,a,r){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,a,r)},c}(u.default),T=y;exports.default=T;"},"sourceMaps":null,"error":null,"hash":"539310c461a3d9a8ea0c5cec25995395","cacheData":{"env":{}}}