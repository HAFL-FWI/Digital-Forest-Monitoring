{"id":"utils/autocomplete_util.js","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574257931911},{"name":"awesomplete/awesomplete","loc":{"line":1,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/autocomplete_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/awesomplete/awesomplete.js"},{"name":"awesomplete/awesomplete.css","loc":{"line":2,"column":7},"parent":"/Users/hk/Sites/digital-forest-monitoring/src/utils/autocomplete_util.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/awesomplete/awesomplete.css"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _awesomplete = _interopRequireDefault(require(\"awesomplete/awesomplete\"));\n\nrequire(\"awesomplete/awesomplete.css\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Autocomplete =\n/*#__PURE__*/\nfunction () {\n  function Autocomplete() {\n    _classCallCheck(this, Autocomplete);\n  }\n\n  _createClass(Autocomplete, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this.input = document.getElementById(\"search\");\n\n      this.input.oninput = function () {\n        return _this.performSearch(_this.input.value);\n      };\n\n      this.autocomplete = new _awesomplete.default(this.input);\n      console.log(this.autocomplete);\n    }\n  }, {\n    key: \"performSearch\",\n    value: function performSearch(searchString) {\n      var _this2 = this;\n\n      var url = \"https://api3.geo.admin.ch/rest/services/api/SearchServer?searchText=\".concat(searchString, \"&type=locations&limit=50&sr=3857&geometryFormat=geojson\");\n      var request = new XMLHttpRequest();\n      request.open(\"GET\", url, true);\n\n      request.onload = function () {\n        var featureCollection = JSON.parse(request.responseText);\n        var strings = featureCollection.features.map(function (feature) {\n          return feature.properties.label;\n        });\n        _this2.autocomplete.list = strings; //   const list = JSON.parse(request.responseText).map(\n        //     feature => feature.properties.label\n        //   );\n        //   this.autocomplete.list = list;\n      };\n\n      request.send(); // fetch(url)\n      //   .then(response => response.json())\n      //   .then(featureCollection => {\n      //     const strings = featureCollection.features.map(\n      //       feature => feature.properties.label\n      //     );\n      //     this.autocomplete.list = strings;\n      //   });\n    }\n  }]);\n\n  return Autocomplete;\n}();\n\nvar _default = new Autocomplete();\n\nexports.default = _default;"},"sourceMaps":null,"error":null,"hash":"7c29fa092abd70c84dfbe4c814a713a0","cacheData":{"env":{}}}