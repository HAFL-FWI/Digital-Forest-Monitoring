{"id":"../node_modules/ol/renderer/Composite.js","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../css.js","loc":{"line":17,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/css.js"},{"name":"../layer/Layer.js","loc":{"line":18,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/layer/Layer.js"},{"name":"../render/Event.js","loc":{"line":19,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/Event.js"},{"name":"../render/EventType.js","loc":{"line":20,"column":28},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/EventType.js"},{"name":"./Map.js","loc":{"line":21,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Map.js"},{"name":"../source/State.js","loc":{"line":22,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/State.js"},{"name":"../dom.js","loc":{"line":23,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/dom.js"},{"name":"../render/canvas.js","loc":{"line":24,"column":27},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/render/canvas.js"},{"name":"../events/EventType.js","loc":{"line":25,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/EventType.js"},{"name":"../events.js","loc":{"line":26,"column":38},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/Composite.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _css = require(\"../css.js\");\n\nvar _Layer = require(\"../layer/Layer.js\");\n\nvar _Event = _interopRequireDefault(require(\"../render/Event.js\"));\n\nvar _EventType = _interopRequireDefault(require(\"../render/EventType.js\"));\n\nvar _Map = _interopRequireDefault(require(\"./Map.js\"));\n\nvar _State = _interopRequireDefault(require(\"../source/State.js\"));\n\nvar _dom = require(\"../dom.js\");\n\nvar _canvas = require(\"../render/canvas.js\");\n\nvar _EventType2 = _interopRequireDefault(require(\"../events/EventType.js\"));\n\nvar _events = require(\"../events.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/Composite\n */\n\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nvar CompositeMapRenderer =\n/** @class */\nfunction (_super) {\n  __extends(CompositeMapRenderer, _super);\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n\n\n  function CompositeMapRenderer(map) {\n    var _this = _super.call(this, map) || this;\n    /**\n     * @type {import(\"../events.js\").EventsKey}\n     */\n\n\n    _this.labelCacheKey_ = (0, _events.listen)(_canvas.labelCache, _EventType2.default.CLEAR, map.redrawText.bind(map));\n    /**\n     * @private\n     * @type {HTMLDivElement}\n     */\n\n    _this.element_ = document.createElement('div');\n    var style = _this.element_.style;\n    style.position = 'absolute';\n    style.width = '100%';\n    style.height = '100%';\n    style.zIndex = '0';\n    _this.element_.className = _css.CLASS_UNSELECTABLE + ' ol-layers';\n    var container = map.getViewport();\n    container.insertBefore(_this.element_, container.firstChild || null);\n    /**\n     * @private\n     * @type {Array<HTMLElement>}\n     */\n\n    _this.children_ = [];\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.renderedVisible_ = true;\n    return _this;\n  }\n  /**\n   * @param {import(\"../render/EventType.js\").default} type Event type.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n\n\n  CompositeMapRenderer.prototype.dispatchRenderEvent = function (type, frameState) {\n    var map = this.getMap();\n\n    if (map.hasListener(type)) {\n      var event_1 = new _Event.default(type, undefined, frameState);\n      map.dispatchEvent(event_1);\n    }\n  };\n\n  CompositeMapRenderer.prototype.disposeInternal = function () {\n    (0, _events.unlistenByKey)(this.labelCacheKey_);\n\n    _super.prototype.disposeInternal.call(this);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  CompositeMapRenderer.prototype.renderFrame = function (frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n\n      return;\n    }\n\n    this.calculateMatrices2D(frameState);\n    this.dispatchRenderEvent(_EventType.default.PRECOMPOSE, frameState);\n    var layerStatesArray = frameState.layerStatesArray.sort(function (a, b) {\n      return a.zIndex - b.zIndex;\n    });\n    var viewState = frameState.viewState;\n    this.children_.length = 0;\n    var previousElement = null;\n\n    for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      var layerState = layerStatesArray[i];\n      frameState.layerIndex = i;\n\n      if (!(0, _Layer.inView)(layerState, viewState) || layerState.sourceState != _State.default.READY && layerState.sourceState != _State.default.UNDEFINED) {\n        continue;\n      }\n\n      var layer = layerState.layer;\n      var element = layer.render(frameState, previousElement);\n\n      if (!element) {\n        continue;\n      }\n\n      if (element !== previousElement) {\n        this.children_.push(element);\n        previousElement = element;\n      }\n    }\n\n    _super.prototype.renderFrame.call(this, frameState);\n\n    (0, _dom.replaceChildren)(this.element_, this.children_);\n    this.dispatchRenderEvent(_EventType.default.POSTCOMPOSE, frameState);\n\n    if (!this.renderedVisible_) {\n      this.element_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.scheduleExpireIconCache(frameState);\n  };\n  /**\n   * @inheritDoc\n   */\n\n\n  CompositeMapRenderer.prototype.forEachLayerAtPixel = function (pixel, frameState, hitTolerance, callback, layerFilter) {\n    var viewState = frameState.viewState;\n    var layerStates = frameState.layerStatesArray;\n    var numLayers = layerStates.length;\n\n    for (var i = numLayers - 1; i >= 0; --i) {\n      var layerState = layerStates[i];\n      var layer = layerState.layer;\n\n      if (layer.hasRenderer() && (0, _Layer.inView)(layerState, viewState) && layerFilter(layer)) {\n        var layerRenderer = layer.getRenderer();\n        var data = layerRenderer.getDataAtPixel(pixel, frameState, hitTolerance);\n\n        if (data) {\n          var result = callback(layer, data);\n\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n\n    return undefined;\n  };\n\n  return CompositeMapRenderer;\n}(_Map.default);\n\nvar _default = CompositeMapRenderer;\nexports.default = _default;"},"sourceMaps":null,"error":null,"hash":"e710fbc2aac3981b43618676439beca8","cacheData":{"env":{}}}