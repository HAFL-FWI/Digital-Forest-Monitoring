{"id":"v3xZ","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../util.js","loc":{"line":17,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/util.js"},{"name":"../Collection.js","loc":{"line":18,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Collection.js"},{"name":"../CollectionEventType.js","loc":{"line":19,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/CollectionEventType.js"},{"name":"../ObjectEventType.js","loc":{"line":20,"column":28},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/ObjectEventType.js"},{"name":"../array.js","loc":{"line":21,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/array.js"},{"name":"../asserts.js","loc":{"line":22,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/asserts.js"},{"name":"../events.js","loc":{"line":23,"column":38},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events.js"},{"name":"../events/Event.js","loc":{"line":24,"column":18},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/Event.js"},{"name":"../events/EventType.js","loc":{"line":25,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/EventType.js"},{"name":"../extent.js","loc":{"line":26,"column":39},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"../featureloader.js","loc":{"line":27,"column":20},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/featureloader.js"},{"name":"../functions.js","loc":{"line":28,"column":27},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/functions.js"},{"name":"../loadingstrategy.js","loc":{"line":29,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/loadingstrategy.js"},{"name":"../obj.js","loc":{"line":30,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/obj.js"},{"name":"./Source.js","loc":{"line":31,"column":19},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Source.js"},{"name":"./State.js","loc":{"line":32,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/State.js"},{"name":"./VectorEventType.js","loc":{"line":33,"column":28},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/VectorEventType.js"},{"name":"../structs/RBush.js","loc":{"line":34,"column":18},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/structs/RBush.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=require(\"../util.js\"),t=E(require(\"../Collection.js\")),r=E(require(\"../CollectionEventType.js\")),n=E(require(\"../ObjectEventType.js\")),i=require(\"../array.js\"),o=require(\"../asserts.js\"),s=require(\"../events.js\"),a=E(require(\"../events/Event.js\")),u=E(require(\"../events/EventType.js\")),l=require(\"../extent.js\"),h=require(\"../featureloader.js\"),d=require(\"../functions.js\"),f=require(\"../loadingstrategy.js\"),c=require(\"../obj.js\"),_=E(require(\"./Source.js\")),p=E(require(\"./State.js\")),v=E(require(\"./VectorEventType.js\")),y=E(require(\"../structs/RBush.js\"));function E(e){return e&&e.__esModule?e:{default:e}}var g=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),x=function(e){function t(t,r){var n=e.call(this,t)||this;return n.feature=r,n}return g(t,e),t}(a.default);exports.VectorSourceEvent=x;var F=function(a){function _(e){var r=this,n=e||{};(r=a.call(this,{attributions:n.attributions,projection:void 0,state:p.default.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=d.VOID,r.format_=n.format,r.overlaps_=null==n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&((0,o.assert)(r.format_,7),r.loader_=(0,h.xhr)(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:f.all;var i,s,u=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=u?new y.default:null,r.loadedExtentsRtree_=new y.default,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?s=n.features:n.features&&(s=(i=n.features).getArray()),u||void 0!==i||(i=new t.default(s)),void 0!==s&&r.addFeaturesInternal(s),void 0!==i&&r.bindFeaturesCollection_(i),r}return g(_,a),_.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},_.prototype.addFeatureInternal=function(t){var r=(0,e.getUid)(t);if(this.addToIndex_(r,t)){this.setupChangeEvents_(r,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[r]=t;this.dispatchEvent(new x(v.default.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},_.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[(0,s.listen)(t,u.default.CHANGE,this.handleFeatureChange_,this),(0,s.listen)(t,n.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},_.prototype.addToIndex_=function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,o.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},_.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},_.prototype.addFeaturesInternal=function(t){for(var r=[],n=[],i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=(0,e.getUid)(a);this.addToIndex_(u,a)&&n.push(a)}o=0;for(var l=n.length;o<l;o++){a=n[o],u=(0,e.getUid)(a);this.setupChangeEvents_(u,a);var h=a.getGeometry();if(h){var d=h.getExtent();r.push(d),i.push(a)}else this.nullGeometryFeatures_[u]=a}this.featuresRtree_&&this.featuresRtree_.load(r,i);o=0;for(var f=n.length;o<f;o++)this.dispatchEvent(new x(v.default.ADDFEATURE,n[o]))},_.prototype.bindFeaturesCollection_=function(e){var t=!1;this.addEventListener(v.default.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(v.default.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(r.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(r.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e},_.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(s.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new x(v.default.CLEAR);this.dispatchEvent(n),this.changed()},_.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},_.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},_.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},_.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})},_.prototype.getFeaturesCollection=function(){return this.featuresCollection_},_.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,c.isEmpty)(this.nullGeometryFeatures_)||(0,i.extend)(e,(0,c.getValues)(this.nullGeometryFeatures_))),e},_.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},_.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},_.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],n=e[1],i=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||d.TRUE;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),l=s;if((s=t.closestPointXY(r,n,o,s))<l){i=e;var h=Math.sqrt(s);a[0]=r-h,a[1]=n-h,a[2]=r+h,a[3]=n+h}}}),i},_.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},_.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},_.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},_.prototype.getFormat=function(){return this.format_},_.prototype.getOverlaps=function(){return this.overlaps_},_.prototype.getUrl=function(){return this.url_},_.prototype.handleFeatureChange_=function(t){var r=t.target,n=(0,e.getUid)(r),i=r.getGeometry();if(i){var o=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,r)):this.featuresRtree_&&this.featuresRtree_.update(o,r)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[n]=r);var s=r.getId();if(void 0!==s){var a=s.toString();this.idIndex_[a]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[a]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[n]=r;this.changed(),this.dispatchEvent(new x(v.default.CHANGEFEATURE,r))},_.prototype.hasFeature=function(t){var r=t.getId();return void 0!==r?r in this.idIndex_:(0,e.getUid)(t)in this.uidIndex_},_.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,c.isEmpty)(this.nullGeometryFeatures_)},_.prototype.loadFeatures=function(e,t,r){var n=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(var o=function(e,o){var a=i[e];n.forEachInExtent(a,function(e){return(0,l.containsExtent)(e.extent,a)})||(s.loader_.call(s,a,t,r),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==d.VOID)},s=this,a=0,u=i.length;a<u;++a)o(a)},_.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),a.prototype.refresh.call(this)},_.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,l.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)},_.prototype.removeFeature=function(t){var r=(0,e.getUid)(t);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},_.prototype.removeFeatureInternal=function(t){var r=(0,e.getUid)(t);this.featureChangeKeys_[r].forEach(s.unlistenByKey),delete this.featureChangeKeys_[r];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[r],this.dispatchEvent(new x(v.default.REMOVEFEATURE,t))},_.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},_.prototype.setLoader=function(e){this.loader_=e},_.prototype.setUrl=function(e){(0,o.assert)(this.format_,7),this.setLoader((0,h.xhr)(e,this.format_))},_}(_.default),I=F;exports.default=I;"},"sourceMaps":null,"error":null,"hash":"ba8fe78d35f1bdd2dab3c15c26d60cfb","cacheData":{"env":{}}}