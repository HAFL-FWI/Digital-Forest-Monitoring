{"id":"o8Mp","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"./common.js","loc":{"line":17,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/common.js"},{"name":"../Tile.js","loc":{"line":18,"column":17},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Tile.js"},{"name":"../TileState.js","loc":{"line":19,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/TileState.js"},{"name":"../events.js","loc":{"line":20,"column":38},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events.js"},{"name":"../events/EventType.js","loc":{"line":21,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/EventType.js"},{"name":"../extent.js","loc":{"line":22,"column":52},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"../math.js","loc":{"line":23,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/math.js"},{"name":"../reproj.js","loc":{"line":24,"column":71},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj.js"},{"name":"./Triangulation.js","loc":{"line":25,"column":26},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Tile.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/reproj/Triangulation.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"./common.js\"),t=l(require(\"../Tile.js\")),r=l(require(\"../TileState.js\")),i=require(\"../events.js\"),s=l(require(\"../events/EventType.js\")),o=require(\"../extent.js\"),n=require(\"../math.js\"),a=require(\"../reproj.js\"),u=l(require(\"./Triangulation.js\"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),d=function(t){function l(i,s,l,c,d,_,f,h,p,g,T){var E=t.call(this,d,r.default.IDLE)||this;E.renderEdges_=void 0!==T&&T,E.pixelRatio_=f,E.gutter_=h,E.canvas_=null,E.sourceTileGrid_=s,E.targetTileGrid_=c,E.wrappedTileCoord_=_||d,E.sourceTiles_=[],E.sourcesListenerKeys_=null,E.sourceZ_=0;var v=c.getTileCoordExtent(E.wrappedTileCoord_),y=E.targetTileGrid_.getExtent(),x=E.sourceTileGrid_.getExtent(),R=y?(0,o.getIntersection)(v,y):v;if(0===(0,o.getArea)(R))return E.state=r.default.EMPTY,E;var j=i.getExtent();j&&(x=x?(0,o.getIntersection)(x,j):j);var L=c.getResolution(E.wrappedTileCoord_[0]),m=(0,o.getCenter)(R),O=(0,a.calculateSourceResolution)(i,l,m,L);if(!isFinite(O)||O<=0)return E.state=r.default.EMPTY,E;var D=void 0!==g?g:e.ERROR_THRESHOLD;if(E.triangulation_=new u.default(i,l,R,x,O*D),0===E.triangulation_.getTriangles().length)return E.state=r.default.EMPTY,E;E.sourceZ_=s.getZForResolution(O);var G=E.triangulation_.calculateSourceExtent();if(x&&(i.canWrapX()?(G[1]=(0,n.clamp)(G[1],x[1],x[3]),G[3]=(0,n.clamp)(G[3],x[1],x[3])):G=(0,o.getIntersection)(G,x)),(0,o.getArea)(G)){for(var I=s.getTileRangeForExtentAndZ(G,E.sourceZ_),S=I.minX;S<=I.maxX;S++)for(var A=I.minY;A<=I.maxY;A++){var C=p(E.sourceZ_,S,A,f);C&&E.sourceTiles_.push(C)}0===E.sourceTiles_.length&&(E.state=r.default.EMPTY)}else E.state=r.default.EMPTY;return E}return c(l,t),l.prototype.disposeInternal=function(){this.state==r.default.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},l.prototype.getImage=function(){return this.canvas_},l.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,i,s){t&&t.getState()==r.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=r.default.ERROR;else{var t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s=\"number\"==typeof i?i:i[0],o=\"number\"==typeof i?i:i[1],n=this.targetTileGrid_.getResolution(t),u=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,a.render)(s,o,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),n,l,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=r.default.LOADED}this.changed()},l.prototype.load=function(){if(this.state==r.default.IDLE){this.state=r.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,o,n){var a=t.getState();if(a==r.default.IDLE||a==r.default.LOADING){e++;var u=(0,i.listen)(t,s.default.CHANGE,function(s){var o=t.getState();o!=r.default.LOADED&&o!=r.default.ERROR&&o!=r.default.EMPTY||((0,i.unlistenByKey)(u),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),this.sourceTiles_.forEach(function(e,t,i){e.getState()==r.default.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},l.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(i.unlistenByKey),this.sourcesListenerKeys_=null},l}(t.default),_=d;exports.default=_;"},"sourceMaps":null,"error":null,"hash":"134e482d75707720f037675e2a21c475","cacheData":{"env":{}}}