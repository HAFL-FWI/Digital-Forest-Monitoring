{"id":"lOLL","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../events/EventType.js","loc":{"line":17,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/EventType.js"},{"name":"../Feature.js","loc":{"line":18,"column":20},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Feature.js"},{"name":"../MapBrowserEventType.js","loc":{"line":19,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/MapBrowserEventType.js"},{"name":"../MapBrowserPointerEvent.js","loc":{"line":20,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/MapBrowserPointerEvent.js"},{"name":"../Object.js","loc":{"line":21,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/Object.js"},{"name":"../coordinate.js","loc":{"line":22,"column":61},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/coordinate.js"},{"name":"../events/Event.js","loc":{"line":23,"column":18},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/Event.js"},{"name":"../events/condition.js","loc":{"line":24,"column":53},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/events/condition.js"},{"name":"../extent.js","loc":{"line":25,"column":87},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"../functions.js","loc":{"line":26,"column":28},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/functions.js"},{"name":"../geom/Circle.js","loc":{"line":27,"column":19},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/Circle.js"},{"name":"../geom/GeometryType.js","loc":{"line":28,"column":25},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/GeometryType.js"},{"name":"../geom/LineString.js","loc":{"line":29,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/LineString.js"},{"name":"../geom/MultiLineString.js","loc":{"line":30,"column":28},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/MultiLineString.js"},{"name":"../geom/MultiPoint.js","loc":{"line":31,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/MultiPoint.js"},{"name":"../geom/MultiPolygon.js","loc":{"line":32,"column":25},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/MultiPolygon.js"},{"name":"../geom/Point.js","loc":{"line":33,"column":18},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/Point.js"},{"name":"../geom/Polygon.js","loc":{"line":34,"column":49},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/geom/Polygon.js"},{"name":"./Pointer.js","loc":{"line":35,"column":31},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Pointer.js"},{"name":"./Property.js","loc":{"line":36,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Property.js"},{"name":"../layer/Vector.js","loc":{"line":37,"column":24},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/layer/Vector.js"},{"name":"../source/Vector.js","loc":{"line":38,"column":25},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/source/Vector.js"},{"name":"../style/Style.js","loc":{"line":39,"column":35},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/interaction/Draw.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/style/Style.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.createRegularPolygon=F,exports.createBox=R,exports.default=void 0;var e=w(require(\"../events/EventType.js\")),t=w(require(\"../Feature.js\")),i=w(require(\"../MapBrowserEventType.js\")),s=w(require(\"../MapBrowserPointerEvent.js\")),o=require(\"../Object.js\"),n=require(\"../coordinate.js\"),r=w(require(\"../events/Event.js\")),a=require(\"../events/condition.js\"),h=require(\"../extent.js\"),u=require(\"../functions.js\"),d=w(require(\"../geom/Circle.js\")),_=w(require(\"../geom/GeometryType.js\")),l=w(require(\"../geom/LineString.js\")),c=w(require(\"../geom/MultiLineString.js\")),f=w(require(\"../geom/MultiPoint.js\")),p=w(require(\"../geom/MultiPolygon.js\")),g=w(require(\"../geom/Point.js\")),y=O(require(\"../geom/Polygon.js\")),m=w(require(\"./Pointer.js\")),C=w(require(\"./Property.js\")),k=w(require(\"../layer/Vector.js\")),v=w(require(\"../source/Vector.js\")),P=require(\"../style/Style.js\");function T(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function O(e){if(e&&e.__esModule)return e;var t=T();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=s?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=e[o]}}return i.default=e,t&&t.set(e,i),i}function w(e){return e&&e.__esModule?e:{default:e}}var L=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),N={POINT:\"Point\",LINE_STRING:\"LineString\",POLYGON:\"Polygon\",CIRCLE:\"Circle\"},I={DRAWSTART:\"drawstart\",DRAWEND:\"drawend\"},D=function(e){function t(t,i){var s=e.call(this,t)||this;return s.feature=i,s}return L(t,e),t}(r.default),E=function(r){function h(e){var t=this,i=e;i.stopDown||(i.stopDown=u.FALSE),(t=r.call(this,i)||this).shouldHandle_=!1,t.downPx_=null,t.downTimeout_,t.lastDragTime_,t.freehand_=!1,t.source_=e.source?e.source:null,t.features_=e.features?e.features:null,t.snapTolerance_=e.snapTolerance?e.snapTolerance:12,t.type_=e.type,t.mode_=M(t.type_),t.stopClick_=!!e.stopClick,t.minPoints_=e.minPoints?e.minPoints:t.mode_===N.POLYGON?3:2,t.maxPoints_=e.maxPoints?e.maxPoints:1/0,t.finishCondition_=e.finishCondition?e.finishCondition:u.TRUE;var s=e.geometryFunction;if(!s)if(t.type_===_.default.CIRCLE)s=function(e,t){var i=t||new d.default([NaN,NaN]),s=(0,n.squaredDistance)(e[0],e[1]);return i.setCenterAndRadius(e[0],Math.sqrt(s)),i};else{var h,c=t.mode_;c===N.POINT?h=g.default:c===N.LINE_STRING?h=l.default:c===N.POLYGON&&(h=y.default),s=function(e,t){var i=t;return i?c===N.POLYGON?e[0].length?i.setCoordinates([e[0].concat([e[0][0]])]):i.setCoordinates([]):i.setCoordinates(e):i=new h(e),i}}return t.geometryFunction_=s,t.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,t.finishCoordinate_=null,t.sketchFeature_=null,t.sketchPoint_=null,t.sketchCoords_=null,t.sketchLine_=null,t.sketchLineCoords_=null,t.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,t.overlay_=new k.default({source:new v.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:G(),updateWhileInteracting:!0}),t.geometryName_=e.geometryName,t.condition_=e.condition?e.condition:a.noModifierKeys,t.freehandCondition_,e.freehand?t.freehandCondition_=a.always:t.freehandCondition_=e.freehandCondition?e.freehandCondition:a.shiftKeyOnly,t.addEventListener((0,o.getChangeEventType)(C.default.ACTIVE),t.updateState_),t}return L(h,r),h.prototype.setMap=function(e){r.prototype.setMap.call(this,e),this.updateState_()},h.prototype.getOverlay=function(){return this.overlay_},h.prototype.handleEvent=function(t){t.originalEvent.type===e.default.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==N.POINT&&this.freehandCondition_(t);var s=t.type===i.default.POINTERMOVE,o=!0;!this.freehand_&&this.lastDragTime_&&t.type===i.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,s=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===i.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),o=!1):this.freehand_&&t.type===i.default.POINTERDOWN?o=!1:s?(o=t.type===i.default.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(t):(\"mouse\"==t.pointerEvent.pointerType||t.type===i.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===i.default.DBLCLICK&&(o=!1),r.prototype.handleEvent.call(this,t)&&o},h.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.default(i.default.POINTERMOVE,e.map,e.pointerEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},h.prototype.handleUpEvent=function(e){var t=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);var i=this.mode_===N.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e):(this.startDrawing_(e),this.mode_===N.POINT&&this.finishDrawing()),t=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!t&&this.stopClick_&&e.stopPropagation(),t},h.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,s=t[0]-i[0],o=t[1]-i[1],n=s*s+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},h.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_];if(this.mode_===N.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===N.POLYGON){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,s=[o[0][0],o[0][o[0].length-2]]}if(i)for(var n=e.map,r=0,a=s.length;r<a;r++){var h=s[r],u=n.getPixelFromCoordinate(h),d=e.pixel,_=d[0]-u[0],l=d[1]-u[1],c=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(_*_+l*l)<=c){this.finishCoordinate_=h;break}}}return t},h.prototype.createOrUpdateSketchPoint_=function(e){var i=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(i):(this.sketchPoint_=new t.default(new g.default(i)),this.updateSketchFeatures_())},h.prototype.startDrawing_=function(e){var i=e.coordinate;this.finishCoordinate_=i,this.mode_===N.POINT?this.sketchCoords_=i.slice():this.mode_===N.POLYGON?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new t.default(new l.default(this.sketchLineCoords_)));var s=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new t.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new D(I.DRAWSTART,this.sketchFeature_))},h.prototype.modifyDrawing_=function(e){var i,s,o,n=e.coordinate,r=this.sketchFeature_.getGeometry();(this.mode_===N.POINT?s=this.sketchCoords_:this.mode_===N.POLYGON?(s=(i=this.sketchCoords_[0])[i.length-1],this.atFinish_(e)&&(n=this.finishCoordinate_.slice())):s=(i=this.sketchCoords_)[i.length-1],s[0]=n[0],s[1]=n[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(n);if(r.getType()==_.default.POLYGON&&this.mode_!==N.POLYGON){this.sketchLine_||(this.sketchLine_=new t.default);var a=r.getLinearRing(0);(o=this.sketchLine_.getGeometry())?(o.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),o.changed()):(o=new l.default(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(o))}else this.sketchLineCoords_&&(o=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},h.prototype.addToDrawing_=function(e){var t,i,s=e.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===N.LINE_STRING?(this.finishCoordinate_=s.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(s.slice()),this.geometryFunction_(i,o)):this.mode_===N.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(s.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),t&&this.finishDrawing()},h.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry();this.mode_===N.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===N.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},h.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry();this.mode_===N.LINE_STRING?(t.pop(),this.geometryFunction_(t,i)):this.mode_===N.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i),t=i.getCoordinates()),this.type_===_.default.MULTI_POINT?e.setGeometry(new f.default([t])):this.type_===_.default.MULTI_LINE_STRING?e.setGeometry(new c.default([t])):this.type_===_.default.MULTI_POLYGON&&e.setGeometry(new p.default([t])),this.dispatchEvent(new D(I.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},h.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),e},h.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new D(I.DRAWSTART,this.sketchFeature_))},h.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},h.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing_(),this.overlay_.setMap(t?e:null)},h}(m.default);function G(){var e=(0,P.createEditingStyle)();return function(t,i){return e[t.getGeometry().getType()]}}function F(e,t){return function(i,s){var o=i[0],r=i[1],a=Math.sqrt((0,n.squaredDistance)(o,r)),h=s||(0,y.fromCircle)(new d.default(o),e),u=t;if(!t){var _=r[0]-o[0],l=r[1]-o[1];u=Math.atan(l/_)-(_<0?Math.PI:0)}return(0,y.makeRegular)(h,o,a,u),h}}function R(){return function(e,t){var i=(0,h.boundingExtent)(e),s=[[(0,h.getBottomLeft)(i),(0,h.getBottomRight)(i),(0,h.getTopRight)(i),(0,h.getTopLeft)(i),(0,h.getBottomLeft)(i)]],o=t;return o?o.setCoordinates(s):o=new y.default(s),o}}function M(e){var t;return e===_.default.POINT||e===_.default.MULTI_POINT?t=N.POINT:e===_.default.LINE_STRING||e===_.default.MULTI_LINE_STRING?t=N.LINE_STRING:e===_.default.POLYGON||e===_.default.MULTI_POLYGON?t=N.POLYGON:e===_.default.CIRCLE&&(t=N.CIRCLE),t}var S=E;exports.default=S;"},"sourceMaps":null,"error":null,"hash":"a016127f911337454ea0a8246456ba03","cacheData":{"env":{}}}