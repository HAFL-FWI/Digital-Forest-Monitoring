{"id":"ISPk","dependencies":[{"name":"/Users/hk/Sites/digital-forest-monitoring/package.json","includedInParent":true,"mtime":1574333047455},{"name":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/package.json","includedInParent":true,"mtime":1573122283680},{"name":"../../util.js","loc":{"line":17,"column":23},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/util.js"},{"name":"../../proj.js","loc":{"line":18,"column":31},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/proj.js"},{"name":"../../TileRange.js","loc":{"line":19,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/TileRange.js"},{"name":"../../TileState.js","loc":{"line":20,"column":22},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/TileState.js"},{"name":"../../extent.js","loc":{"line":21,"column":65},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/extent.js"},{"name":"./Layer.js","loc":{"line":22,"column":32},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/Layer.js"},{"name":"../../transform.js","loc":{"line":23,"column":82},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/transform.js"},{"name":"../../array.js","loc":{"line":24,"column":42},"parent":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/Users/hk/Sites/digital-forest-monitoring/node_modules/ol/array.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"../../util.js\"),t=require(\"../../proj.js\"),r=l(require(\"../../TileRange.js\")),i=l(require(\"../../TileState.js\")),n=require(\"../../extent.js\"),o=l(require(\"./Layer.js\")),a=require(\"../../transform.js\"),s=require(\"../../array.js\");function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),u=function(o){function l(e){var t=o.call(this,e)||this;return t.extentChanged=!0,t.renderedExtent_=null,t.renderedPixelRatio,t.renderedProjection=null,t.renderedRevision,t.renderedTiles=[],t.newTiles_=!1,t.tmpExtent=(0,n.createEmpty)(),t.tmpTileRange_=new r.default(0,0,0,0),t}return d(l,o),l.prototype.isDrawableTile=function(e){var t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==i.default.LOADED||r==i.default.EMPTY||r==i.default.ERROR&&!n},l.prototype.getTile=function(e,t,r,n){var o=n.pixelRatio,a=n.viewState.projection,s=this.getLayer(),l=s.getSource().getTile(e,t,r,o,a);return l.getState()==i.default.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):l.setState(i.default.LOADED)),this.isDrawableTile(l)||(l=l.getInterimTile()),l},l.prototype.loadedTileCallback=function(e,t,r){return!!this.isDrawableTile(r)&&o.prototype.loadedTileCallback.call(this,e,t,r)},l.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},l.prototype.renderFrame=function(r,o){var l=r.layerStatesArray[r.layerIndex],d=r.viewState,u=d.projection,h=d.resolution,p=d.center,c=d.rotation,g=r.pixelRatio,T=this.getLayer(),f=T.getSource(),v=f.getRevision(),m=f.getTileGridForProjection(u),x=m.getZForResolution(h,f.zDirection),y=m.getResolution(x),R=r.extent,w=l.extent&&(0,t.fromUserExtent)(l.extent,u);w&&(R=(0,n.getIntersection)(R,(0,t.fromUserExtent)(l.extent,u)));var _=f.getTilePixelRatio(g),C=Math.round(r.size[0]*_),E=Math.round(r.size[1]*_);if(c){var j=Math.round(Math.sqrt(C*C+E*E));C=j,E=j}var S=y*C/2/_,P=y*E/2/_,b=[p[0]-S,p[1]-P,p[0]+S,p[1]+P],O=m.getTileRangeForExtentAndZ(R,x),I={};I[x]={};var M=this.createLoadedTileFinder(f,u,I),U=this.tmpExtent,A=this.tmpTileRange_;this.newTiles_=!1;for(var q=O.minX;q<=O.maxX;++q)for(var D=O.minY;D<=O.maxY;++D){var L=this.getTile(x,q,D,r);if(this.isDrawableTile(L)){var F=(0,e.getUid)(this);if(L.getState()==i.default.LOADED){I[x][L.tileCoord.toString()]=L;var k=L.inTransition(F);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(F,r.time))continue}var z=m.getTileCoordChildTileRange(L.tileCoord,A,U),Y=!1;z&&(Y=M(x+1,z)),Y||m.forEachTileCoordParentTileRange(L.tileCoord,M,A,U)}var Z=y/h;(0,a.compose)(this.pixelTransform,r.size[0]/2,r.size[1]/2,1/_,1/_,c,-C/2,-E/2);var K=this.createTransformString(this.pixelTransform);this.useContainer(o,K,l.opacity);var X=this.context,G=X.canvas;(0,a.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,a.compose)(this.tempTransform_,C/2,E/2,Z,Z,0,-C/2,-E/2),G.width!=C||G.height!=E?(G.width=C,G.height=E):this.containerReused||X.clearRect(0,0,C,E),w&&this.clipUnrotated(X,r,w),this.preRender(X,r),this.renderedTiles.length=0;var Q,W,N,B=Object.keys(I).map(Number);B.sort(s.numberSafeCompareFunction),1!==l.opacity||this.containerReused&&!f.getOpaque(r.viewState.projection)?(Q=[],W=[]):B=B.reverse();for(var H=B.length-1;H>=0;--H){var J=B[H],V=f.getTilePixelSize(J,g,u),$=m.getResolution(J)/y,ee=V[0]*$*Z,te=V[1]*$*Z,re=m.getTileCoordForCoordAndZ((0,n.getTopLeft)(b),J),ie=m.getTileCoordExtent(re),ne=(0,a.apply)(this.tempTransform_,[_*(ie[0]-b[0])/y,_*(b[3]-ie[3])/y]),oe=_*f.getGutterForProjection(u),ae=I[J];for(var se in ae){var le=(L=ae[se]).tileCoord,de=ne[0]-(re[1]-le[1])*ee,ue=Math.round(de+ee),he=ne[1]-(re[2]-le[2])*te,pe=Math.round(he+te),ce=ue-(q=Math.round(de)),ge=pe-(D=Math.round(he)),Te=x===J;if(!(k=Te&&1!==L.getAlpha((0,e.getUid)(this),r.time)))if(Q){X.save(),N=[q,D,q+ce,D,q+ce,D+ge,q,D+ge];for(var fe=0,ve=Q.length;fe<ve;++fe)if(x!==J&&J<W[fe]){var me=Q[fe];X.beginPath(),X.moveTo(N[0],N[1]),X.lineTo(N[2],N[3]),X.lineTo(N[4],N[5]),X.lineTo(N[6],N[7]),X.moveTo(me[6],me[7]),X.lineTo(me[4],me[5]),X.lineTo(me[2],me[3]),X.lineTo(me[0],me[1]),X.clip()}Q.push(N),W.push(J)}else X.clearRect(q,D,ce,ge);this.drawTileImage(L,r,q,D,ce,ge,oe,Te,l.opacity),Q&&!k&&X.restore(),this.renderedTiles.push(L),this.updateUsedTiles(r.usedTiles,f,L)}}return this.renderedRevision=v,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!(0,n.equals)(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=g,this.renderedProjection=u,this.manageTilePyramid(r,f,m,g,u,R,x,T.getPreload()),this.updateCacheSize_(r,f),this.scheduleExpireCache(r,f),this.postRender(X,r),l.extent&&X.restore(),K!==G.style.transform&&(G.style.transform=K),this.container},l.prototype.drawTileImage=function(t,r,i,n,o,a,s,l,d){var u=this.getTileImage(t);if(u){var h=(0,e.getUid)(this),p=l?t.getAlpha(h,r.time):1,c=d*p,g=c!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,i,n,o,a),g&&this.context.restore(),1!==p?r.animate=!0:l&&t.endTransition(h)}},l.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},l.prototype.getTileImage=function(e){return e.getImage()},l.prototype.scheduleExpireCache=function(t,r){if(r.canExpireCache()){var i=function(t,r,i){var n=(0,e.getUid)(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,r);t.postRenderFunctions.push(i)}},l.prototype.updateUsedTiles=function(t,r,i){var n=(0,e.getUid)(r);n in t||(t[n]={}),t[n][i.getKey()]=!0},l.prototype.updateCacheSize_=function(t,r){var i=(0,e.getUid)(r),n=0;i in t.usedTiles&&(n+=Object.keys(t.usedTiles[i]).length),i in t.wantedTiles&&(n+=Object.keys(t.wantedTiles[i]).length);var o=r.tileCache;o.highWaterMark<n&&(o.highWaterMark=n)},l.prototype.manageTilePyramid=function(t,r,n,o,a,s,l,d,u){var h=(0,e.getUid)(r);h in t.wantedTiles||(t.wantedTiles[h]={});var p,c,g,T,f,v,m=t.wantedTiles[h],x=t.tileQueue;for(v=n.getMinZoom();v<=l;++v)for(c=n.getTileRangeForExtentAndZ(s,v,c),g=n.getResolution(v),T=c.minX;T<=c.maxX;++T)for(f=c.minY;f<=c.maxY;++f)l-v<=d?((p=r.getTile(v,T,f,o,a)).getState()==i.default.IDLE&&(m[p.getKey()]=!0,x.isKeyQueued(p.getKey())||x.enqueue([p,h,n.getTileCoordCenter(p.tileCoord),g])),void 0!==u&&u(p)):r.useTile(v,T,f,a)},l}(o.default);u.prototype.getLayer;var h=u;exports.default=h;"},"sourceMaps":null,"error":null,"hash":"7cf1887bd8312d2399b3f4b9f7fbc7c1","cacheData":{"env":{}}}